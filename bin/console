#!/usr/bin/env php
<?php

namespace {
    require_once __DIR__ . '/../vendor/autoload.php';

    set_time_limit(0);

    use Symfony\Component\Console\Input\ArgvInput;

    $input = new ArgvInput();
    $env   = $input->getParameterOption(array('--env', '-e'), getenv('SYMFONY_ENV') ?: 'dev');

    /** @var Silex\Application $app */
    $app = require __DIR__ . '/../src/app.php';

    require __DIR__ . '/../config/' . $env . '.php';

    /** @var Symfony\Component\Console\Application $console */
    $console = require __DIR__ . '/../src/console.php';
    $app->boot();
    $console->run();
}
