---

dependencies:
    override:
        # Stop the circleci composer install getting confused by download type "vcs"
        - composer install --prefer-dist --no-interaction

deployment:
    staging:
        branch: develop
        heroku:
            appname: shorty-stage
        commands:
            - heroku maintenance:on --app shorty-stage
            - bin/console --env=prod migrations:migrate
            - heroku maintenance:off --app shorty-stage

    production:
        branch: master
        heroku:
            appname: shorty-production